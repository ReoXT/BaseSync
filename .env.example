# ============================================================================
# BaseSync Environment Variables
# ============================================================================
# This file serves as a template for all environment variables needed by BaseSync.
# Copy this to .env.server in the /app directory and fill in your actual values.
# DO NOT commit .env.server with real credentials to version control.
# ============================================================================

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# NOTE: you can let Wasp set up your Postgres DB by running `wasp start db` in a separate terminal window.
# then, in a new terminal window, run `wasp db migrate-dev` and finally `wasp start`.
# If you use `wasp start db` then you DO NOT need to add a DATABASE_URL env variable here.
# DATABASE_URL=postgresql://user:password@localhost:5432/basesync

# ============================================================================
# PAYMENT PROCESSOR (Choose ONE: Stripe, Lemon Squeezy, or Polar)
# ============================================================================

# --- STRIPE (Default) ---
# For testing, go to https://dashboard.stripe.com/test/apikeys and get a test stripe key that starts with "sk_test_...".
STRIPE_API_KEY=sk_test_...
# After starting the stripe cli (https://stripe.com/docs/stripe-cli) with `stripe listen --forward-to localhost:3001/payments-webhook` it will output your signing secret.
STRIPE_WEBHOOK_SECRET=whsec_...

# --- LEMON SQUEEZY (Alternative) ---
# For testing, create a new store in test mode on https://lemonsqueezy.com.
LEMONSQUEEZY_API_KEY=eyJ...
# After creating a store, you can find your store id in the store settings https://app.lemonsqueezy.com/settings/stores.
LEMONSQUEEZY_STORE_ID=012345
# Define your own webhook secret when creating a new webhook on https://app.lemonsqueezy.com/settings/webhooks.
LEMONSQUEEZY_WEBHOOK_SECRET=my-webhook-secret

# --- POLAR (Alternative) ---
# Generate a token at https://sandbox.polar.sh/dashboard/[your-org-slug]/settings.
POLAR_ORGANIZATION_ACCESS_TOKEN=polar_oat_...
# Define your own webhook secret when creating a new webhook at https://sandbox.polar.sh/dashboard/[your-org-slug]/settings/webhooks.
POLAR_WEBHOOK_SECRET=polar_whs_...
# For production, set this to false, make sure to generate production organization and products.
POLAR_SANDBOX_MODE=true

# --- PAYMENT PLANS (Required for all processors) ---
# If using Stripe, go to https://dashboard.stripe.com/test/products and click on `+ Add Product`.
# Create three subscription products: Starter ($9/mo), Pro ($19/mo), Business ($39/mo)
# For each product, create both monthly and annual price options (annual = 20% discount)
# If using Lemon Squeezy, go to https://app.lemonsqueezy.com/products and create new products and variants.
# If using Polar, go to https://sandbox.polar.sh/dashboard/[your-org-slug]/products and click on `+ New Product`.
PAYMENTS_STARTER_SUBSCRIPTION_PLAN_ID=012345
PAYMENTS_PRO_SUBSCRIPTION_PLAN_ID=012345
PAYMENTS_BUSINESS_SUBSCRIPTION_PLAN_ID=012345

# ============================================================================
# USER AUTHENTICATION & ADMIN
# ============================================================================
# Set this as a comma-separated list of emails you want to give admin privileges to upon registration.
ADMIN_EMAILS=me@example.com,you@example.com,them@example.com

# --- GOOGLE OAUTH (for user authentication) ---
# See our guide for setting up google auth: https://wasp.sh/docs/auth/social-auth/google.
GOOGLE_CLIENT_ID=722...
GOOGLE_CLIENT_SECRET=GOC...

# ============================================================================
# EMAIL SENDING
# ============================================================================
# Get your sendgrid api key at https://app.sendgrid.com/settings/api_keys.
# You can also use Mailgun or other providers supported by Wasp.
SENDGRID_API_KEY=test...

# ============================================================================
# ANALYTICS (Optional)
# ============================================================================

# --- PLAUSIBLE ANALYTICS ---
# Get your plausible api key at https://plausible.io/login or https://your-plausible-instance.com/login.
PLAUSIBLE_API_KEY=gUTgtB...
# You will find your site id in the Plausible dashboard. It will look like 'opensaas.sh'.
PLAUSIBLE_SITE_ID=yoursite.com
# If you are self-hosting plausible, change this to your plausible instance's base url.
PLAUSIBLE_BASE_URL=https://plausible.io/api

# --- GOOGLE ANALYTICS ---
# Get your google service account key at https://console.cloud.google.com/iam-admin/serviceaccounts.
GOOGLE_ANALYTICS_CLIENT_EMAIL=email@example.gserviceaccount.com
# Make sure you convert the private key within the JSON file to base64 first. See the docs for more info.
GOOGLE_ANALYTICS_PRIVATE_KEY=LS02...
# You will find your Property ID in the Google Analytics dashboard. It will look like '987654321'.
GOOGLE_ANALYTICS_PROPERTY_ID=123456789

# ============================================================================
# FILE STORAGE (AWS S3)
# ============================================================================
# Get your aws s3 credentials at https://console.aws.amazon.com and create a new IAM user with S3 access.
# Required for file upload functionality.
AWS_S3_IAM_ACCESS_KEY=ACK...
AWS_S3_IAM_SECRET_KEY=t+33a...
AWS_S3_FILES_BUCKET=your-bucket-name
AWS_S3_REGION=your-region

# ============================================================================
# AI SERVICES (Optional)
# ============================================================================
# Get your openai api key at https://platform.openai.com/account.
OPENAI_API_KEY=sk-k...

# ============================================================================
# BASESYNC-SPECIFIC: AIRTABLE INTEGRATION
# ============================================================================
# Create an OAuth integration at https://airtable.com/create/oauth
# 1. Go to https://airtable.com/create/oauth
# 2. Create a new OAuth integration
# 3. Add required scopes: data.records:read, data.records:write, schema.bases:read
# 4. Set redirect URI to: http://localhost:3000/oauth/airtable/callback (dev) or https://yourdomain.com/oauth/airtable/callback (prod)

# OAuth Client ID from your Airtable OAuth integration
AIRTABLE_CLIENT_ID=your_airtable_client_id

# OAuth Client Secret from your Airtable OAuth integration
AIRTABLE_CLIENT_SECRET=your_airtable_client_secret

# OAuth Redirect URI - must match exactly what's configured in Airtable
# Development: http://localhost:3000/oauth/airtable/callback
# Production: https://yourdomain.com/oauth/airtable/callback
AIRTABLE_REDIRECT_URI=http://localhost:3000/oauth/airtable/callback

# ============================================================================
# BASESYNC-SPECIFIC: GOOGLE SHEETS INTEGRATION
# ============================================================================
# Create OAuth credentials at https://console.cloud.google.com/apis/credentials
# 1. Create a new project or select existing
# 2. Enable Google Sheets API: https://console.cloud.google.com/apis/library/sheets.googleapis.com
# 3. Go to Credentials > Create Credentials > OAuth client ID
# 4. Choose "Web application"
# 5. Add authorized redirect URIs: http://localhost:3000/oauth/google-sheets/callback (dev) or https://yourdomain.com/oauth/google-sheets/callback (prod)

# OAuth Client ID from Google Cloud Console
GOOGLE_SHEETS_CLIENT_ID=your_google_client_id.apps.googleusercontent.com

# OAuth Client Secret from Google Cloud Console
GOOGLE_SHEETS_CLIENT_SECRET=your_google_client_secret

# OAuth Redirect URI - must match exactly what's configured in Google Cloud Console
# Development: http://localhost:3000/oauth/google-sheets/callback
# Production: https://yourdomain.com/oauth/google-sheets/callback
GOOGLE_SHEETS_REDIRECT_URI=http://localhost:3000/oauth/google-sheets/callback

# ============================================================================
# BASESYNC-SPECIFIC: SECURITY & ENCRYPTION
# ============================================================================
# Encryption key for securely storing OAuth tokens and sensitive data in the database.
# Generate a strong 32-byte (256-bit) key using one of these methods:
#   - Node.js: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#   - OpenSSL: openssl rand -hex 32
#   - Online: https://www.random.org/strings/ (use 64 hex characters)
#
# IMPORTANT:
# - Never commit this key to version control
# - Use different keys for development, staging, and production
# - Keep this key secure and backed up - losing it means losing access to stored OAuth tokens
# - Rotate this key periodically and re-encrypt stored tokens
ENCRYPTION_KEY=your_64_character_hex_string_here_generate_with_crypto_randomBytes

# ============================================================================
# BASESYNC-SPECIFIC: SYNC CONFIGURATION (Optional)
# ============================================================================
# These are optional and can be set to customize BaseSync behavior

# How often to run automatic syncs (in minutes). Default: 15
# SYNC_INTERVAL_MINUTES=15

# Maximum number of records to sync in a single batch. Default: 1000
# SYNC_BATCH_SIZE=1000

# Enable webhook-based real-time sync (true/false). Default: true
# SYNC_ENABLE_WEBHOOKS=true

# Webhook signing secret for validating incoming webhooks from Airtable
# Generate a random string to use as signing secret
# AIRTABLE_WEBHOOK_SECRET=your_webhook_signing_secret

# Webhook endpoint URL for Airtable to send notifications to
# Development: http://localhost:3001/webhooks/airtable
# Production: https://yourdomain.com/webhooks/airtable
# AIRTABLE_WEBHOOK_URL=http://localhost:3001/webhooks/airtable
